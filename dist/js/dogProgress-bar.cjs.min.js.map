{"version":3,"file":"dogProgress-bar.cjs.min.js","sources":["../../src/js/dogProgress-bar.ts"],"sourcesContent":["/**\r\n *  ###########################################\r\n *\r\n * 注意事项：\r\n *\r\n * 如果设置了moveBar width的动画则会影响updateMoveBarWidthAndMoveBtnLeft方法\r\n *\r\n * 无法读取this.element.getBoundingClientRect()当前的值\r\n *\r\n * 因为此时浏览器还没有绘制完成 可使用setTimeout() 设置大于动画时间的延迟解决\r\n *\r\n * ############################################\r\n */\r\nimport '../css/progress-bar.scss';\r\n\r\nconst ElementClass: string = 'dog-progress';\r\nconst MoveBarClass: string = 'move-bar';\r\nconst MoveBtnClass: string = 'move-btn';\r\n\r\nexport interface ProgressBarOptions {\r\n    height?: string,\r\n    width?: string,\r\n    moveBtnPercentage?: number,\r\n    moveBtnRadius?: string,\r\n    horizontal?: boolean,\r\n    step?: number\r\n    handleProgressChange?: HandleProgressChange,\r\n}\r\n\r\n\r\nclass DogProgressBar {\r\n    options: ProgressBarOptions = {\r\n        height: '10px',\r\n        width: '100%',\r\n        horizontal: true,\r\n        //0-1\r\n        moveBtnPercentage: 0,\r\n        moveBtnRadius: '15px',\r\n        //0-100\r\n        step: 1,\r\n        /**\r\n         * 当进度条发生改变时触发事件\r\n         *\r\n         */\r\n        handleProgressChange: () => {return}\r\n    }\r\n    element: Element;\r\n    moveBar: HTMLElement;\r\n    moveBtn: HTMLElement;\r\n    isDragging: boolean = false;\r\n    horizontal: boolean;\r\n    moveBtnSelect: boolean = false;\r\n    isMobile: boolean = false;\r\n\r\n    /**\r\n     * 创建一个 ProgressBar 实例\r\n     * @param element\r\n     * @param options - 进度条的配置选项\r\n     * @return void\r\n     * @example\r\n     *    let progressBars = document.querySelectorAll('.volume-progress');\r\n     *     progressBars.forEach(item => new progressBar(item))\r\n     */\r\n    constructor(element: Element, options?: ProgressBarOptions) {\r\n        if (!element) {\r\n            console.error(`Element is \"${element}\"`);\r\n            return;\r\n        }\r\n        this.element = element;\r\n        this.options = Object.assign({}, this.options, options);\r\n        this.horizontal = this.options.horizontal;\r\n        let dataHorizontal: string = element.getAttribute('data-dogProgress-horizontal');\r\n        if (dataHorizontal) {\r\n            if (dataHorizontal === 'true') this.horizontal = true;\r\n            if (dataHorizontal === 'false') this.horizontal = false;\r\n        }\r\n        this.init();\r\n    }\r\n\r\n    /**\r\n     * 初始化Progress\r\n     */\r\n    init = () => {\r\n        this.mobile();\r\n        this.element.classList.add(ElementClass);\r\n        if (!this.horizontal) {\r\n            this.element.classList.add('progress-vertical')\r\n        }\r\n\r\n        let _element: HTMLElement = this.element as HTMLElement;\r\n        _element.style.height = this.element.getAttribute('data-dogProgress-height') ?? this.options.height;\r\n        _element.style.width = this.element.getAttribute('data-dogProgress-width') ?? this.options.width;\r\n        _element.style.borderRadius = (this.element.clientHeight / 2) + 'px';\r\n        _element.addEventListener('click', (event: MouseEvent) => {\r\n            this.updateMoveBarWidthAndMoveBtnLeft(this.horizontal ? event.clientX : event.clientY);\r\n        })\r\n        this.buildMoveBar();\r\n        this.element.addEventListener('positionChange', this.options.handleProgressChange)\r\n        window.addEventListener('resize', () => {\r\n            this.updateAddEventListenerStart();\r\n        })\r\n    }\r\n\r\n    mobile = () => {\r\n        if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {\r\n            this.isMobile = true;\r\n            this.element.classList.add('isMobile');\r\n        } else {\r\n            this.isMobile = false;\r\n            this.element.classList.remove('isMobile');\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 监听键盘事件\r\n     */\r\n    addKeyboardListeners = () => {\r\n        this.removeKeyboardListeners()\r\n        document.addEventListener('keydown', this.handleKeyboardNavigation)\r\n    }\r\n\r\n    /**\r\n     * 移除键盘事件\r\n     */\r\n    removeKeyboardListeners = () => {\r\n        document.removeEventListener('keydown', this.handleKeyboardNavigation);\r\n    }\r\n\r\n    /**\r\n     * 键盘事件处理\r\n     * @param event - KeyboardEvent\r\n     */\r\n    handleKeyboardNavigation = (event: KeyboardEvent) => {\r\n        let eleRect: DOMRect = this.element.getBoundingClientRect(),\r\n            moveBarRect: DOMRect = this.moveBar.getBoundingClientRect(),\r\n            stepValue: number, mouseCurrentValue: number;\r\n        if (this.horizontal) {\r\n            stepValue = (this.options.step / 100) * eleRect.width;\r\n            if (event.key === 'ArrowLeft') {\r\n                mouseCurrentValue = Math.max(0, moveBarRect.width - stepValue) + eleRect.left;\r\n                // this.moveBar.style.width = `${Math.max(0, (moveBarRect.width - stepValue)).toFixed(1)}px`;\r\n            }\r\n            if (event.key === 'ArrowRight') {\r\n                mouseCurrentValue = Math.min(eleRect.width, (moveBarRect.width + stepValue)) + eleRect.left;\r\n                // 处理向右键的逻辑\r\n                // this.moveBar.style.width = `${Math.min(eleRect.width, (moveBarRect.width + stepValue)).toFixed(1)}px`;\r\n            }\r\n            this.updateMoveBarWidthAndMoveBtnLeft(mouseCurrentValue)\r\n        } else {\r\n            stepValue = (this.options.step / 100) * eleRect.height\r\n            if (event.key === 'ArrowUp') {\r\n                mouseCurrentValue = eleRect.top + (eleRect.height - (moveBarRect.height + stepValue));\r\n            } else if (event.key === 'ArrowDown') {\r\n                mouseCurrentValue = eleRect.top + (eleRect.height - (moveBarRect.height - stepValue));\r\n            }\r\n            this.updateMoveBarWidthAndMoveBtnLeft(mouseCurrentValue)\r\n        }\r\n\r\n\r\n    }\r\n\r\n    /**\r\n     * 展示moveBtn按钮\r\n     */\r\n    showMoveBtn = () => {\r\n        this.moveBtn.style.visibility = 'unset';\r\n        this.moveBtn.style.opacity = '1';\r\n    }\r\n\r\n    /**\r\n     * 隐藏moveBtn按钮\r\n     */\r\n    hideMovBtn = () => {\r\n        if (this.moveBtnSelect) return;\r\n        this.moveBtn.style.visibility = 'hidden';\r\n        this.moveBtn.style.opacity = '0';\r\n    }\r\n\r\n\r\n    /**\r\n     * 绑定当bar发生变动时触发事件\r\n     */\r\n    bindPositionChange = () => {\r\n        let rectValue: keyof DOMRect = this.horizontal ? 'width' : 'height';\r\n        let changeEvent: ProgressCustomEvent = new CustomEvent('positionChange', {\r\n            detail: {\r\n                percentage: +(this.moveBar.getBoundingClientRect()[rectValue] /\r\n                    this.element.getBoundingClientRect()[rectValue]\r\n                ).toFixed(2),\r\n            }\r\n        });\r\n        // 触发 change 事件\r\n        this.element.dispatchEvent(changeEvent);\r\n    }\r\n\r\n    /**\r\n     * 构建moveBar\r\n     */\r\n    buildMoveBar = () => {\r\n        let moveBar: HTMLElement = document.createElement('div'),\r\n            styleValue: any = this.horizontal ? 'width' : 'height',\r\n            percentageValue: number = +this.element.getAttribute('data-dogProgress-value') || this.options.moveBtnPercentage\r\n        moveBar.classList.add(MoveBarClass);\r\n        if (typeof percentageValue === 'number') {\r\n            if (percentageValue < 0 || percentageValue > 1) {\r\n                throw new Error('moveBtnPercentage的值为0-1之间');\r\n            }\r\n            moveBar.style[styleValue] = `${percentageValue * 100}%`;\r\n        }\r\n        moveBar.style.borderRadius = (this.element.clientHeight / 2) + 'px';\r\n        this.element.append(moveBar);\r\n        this.moveBar = moveBar;\r\n        this.buildMoveBtn();\r\n    }\r\n\r\n    /**\r\n     * 构建MoveBtn\r\n     */\r\n    buildMoveBtn = () => {\r\n        let moveBtn: HTMLElement = document.createElement('div'),\r\n            positionValue: any = this.horizontal ? 'right' : 'top';\r\n        moveBtn.classList.add(MoveBtnClass);\r\n        moveBtn.style.height = this.options.moveBtnRadius;\r\n        moveBtn.style.width = this.options.moveBtnRadius;\r\n        this.moveBar.append(moveBtn);\r\n        moveBtn.style[positionValue] = `-${moveBtn.offsetWidth / 2}px`;\r\n        this.moveBtn = moveBtn;\r\n        this.addEventListenerStart();\r\n    }\r\n\r\n    updateAddEventListenerStart = () => {\r\n        this.mobile();\r\n        this.addEventListenerStart();\r\n    }\r\n\r\n    addEventListenerStart = () => {\r\n        if (this.isMobile) {\r\n            document.removeEventListener('mousedown', this.onMousedown)\r\n            document.removeEventListener('mousemove', this.onMousemove);\r\n            document.removeEventListener('mouseup', this.onMouseup);\r\n            this.element.removeEventListener('mouseover', this.onElementMouseover);\r\n            this.element.removeEventListener('mouseout', this.onElementMouseout);\r\n            this.moveBtn.addEventListener('touchstart', this.onTouchstart, {passive: true})\r\n        } else {\r\n            document.removeEventListener('touchstart', this.onTouchstart);\r\n            document.removeEventListener('touchmove', this.onTouchmove);\r\n            document.removeEventListener('touchend', this.onTouchend);\r\n            this.element.addEventListener('mouseover', this.onElementMouseover);\r\n            this.element.addEventListener('mouseout', this.onElementMouseout);\r\n            this.moveBtn.addEventListener('mousedown', this.onMousedown);\r\n        }\r\n    }\r\n\r\n    onElementMouseover = () => {\r\n        this.addKeyboardListeners();\r\n        this.showMoveBtn();\r\n    }\r\n\r\n    onElementMouseout = () => {\r\n        this.removeKeyboardListeners();\r\n        this.hideMovBtn();\r\n    }\r\n\r\n    onTouchstart = () => {\r\n        this.isDragging = true;\r\n        this.moveBtnSelect = true;\r\n        document.addEventListener('touchmove', this.onTouchmove, {passive: true});\r\n        document.addEventListener('touchend', this.onTouchend);\r\n    }\r\n\r\n    onTouchmove = (event: TouchEvent) => {\r\n        if (!this.isDragging || !this.element || !this.moveBar || !this.moveBtn) return;\r\n        let touch: Touch = event.touches[0];\r\n        this.setUserSelect('none');\r\n        this.updateMoveBarWidthAndMoveBtnLeft(this.horizontal ? touch.clientX : touch.clientY)\r\n    }\r\n\r\n    onTouchend = () => {\r\n        document.removeEventListener('touchmove', this.onTouchmove);\r\n        document.removeEventListener('touchend', this.onTouchend);\r\n        this.isDragging = false;\r\n        this.moveBtnSelect = false;\r\n        this.setUserSelect('');\r\n    }\r\n\r\n    onMousedown = () => {\r\n        this.isDragging = true;\r\n        this.moveBtnSelect = true;\r\n        document.addEventListener('mousemove', this.onMousemove)\r\n        document.addEventListener('mouseup', this.onMouseup)\r\n    }\r\n\r\n    /**\r\n     * 鼠标抬起事件\r\n     */\r\n    onMouseup = () => {\r\n        document.removeEventListener('mousemove', this.onMousemove);\r\n        document.removeEventListener('mouseup', this.onMouseup)\r\n        this.isDragging = false;\r\n        this.moveBtnSelect = false;\r\n        this.hideMovBtn();\r\n        this.setUserSelect('');\r\n    }\r\n\r\n    /**\r\n     * 鼠标移动事件\r\n     * @param event - MouseEvent\r\n     */\r\n    onMousemove = (event: MouseEvent) => {\r\n        if (!this.isDragging || !this.element || !this.moveBar || !this.moveBtn) return;\r\n        this.setUserSelect('none');\r\n        this.updateMoveBarWidthAndMoveBtnLeft(this.horizontal ? event.clientX : event.clientY)\r\n    }\r\n\r\n    /**\r\n     * 更新moveBar和moveBarBtn的位置\r\n     * @param client - number\r\n     */\r\n    updateMoveBarWidthAndMoveBtnLeft = (client: number) => {\r\n        let eleRectValue: keyof DOMRect, eleRectStyleValue: keyof DOMRect, barValue: any, btnValue: any;\r\n        if (this.horizontal) {\r\n            eleRectValue = 'left';\r\n            eleRectStyleValue = 'width';\r\n            barValue = 'width';\r\n            btnValue = 'right';\r\n        } else {\r\n            eleRectValue = 'top';\r\n            eleRectStyleValue = 'height';\r\n            barValue = 'height';\r\n            btnValue = 'top';\r\n        }\r\n\r\n\r\n        requestAnimationFrame(() => {\r\n            let eleRect: DOMRect = this.element.getBoundingClientRect(),\r\n                mousePosition: number = client - eleRect[eleRectValue],\r\n                btnPosition: number, barPosition: number,\r\n                barPercentage: number,\r\n                moveBtnRect: DOMRect = this.moveBtn.getBoundingClientRect();\r\n            let stepSize: number = eleRect[eleRectStyleValue] * (this.options.step / 100);\r\n            if (this.horizontal) {\r\n                barPosition = Math.max(0, Math.min(mousePosition, eleRect[eleRectStyleValue]));\r\n                barPercentage = Math.min(100, (barPosition / eleRect.width) * 100);\r\n                btnPosition = 0;\r\n                if (barPosition < moveBtnRect.width) {\r\n                    btnPosition = -(moveBtnRect.width - (+barPosition.toFixed(0)));\r\n                }\r\n            } else {\r\n                barPosition = Math.round(Math.max(0, Math.min(eleRect[eleRectStyleValue] - mousePosition, eleRect[eleRectStyleValue])) / stepSize) * stepSize;\r\n                barPercentage = (barPosition / eleRect.height) * 100;\r\n                btnPosition = 0;\r\n                if (mousePosition >= eleRect.height - moveBtnRect.height) {\r\n                    btnPosition = Math.max(-this.moveBtn.offsetWidth, barPosition - this.moveBtn.offsetWidth);\r\n                }\r\n            }\r\n            this.moveBar.style[barValue] = barPercentage + '%';\r\n            this.moveBtn.style[btnValue] = btnPosition + 'px';\r\n            this.bindPositionChange();\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 设置用户选中避免拖动突出触发选中\r\n     * @param value - string\r\n     */\r\n    setUserSelect = (value: string) => {\r\n        document.body.style.userSelect = value;\r\n    }\r\n}\r\n\r\n\r\ntype ProgressEvent = {\r\n    percentage: number\r\n}\r\nexport type ProgressCustomEvent = CustomEvent<ProgressEvent>;\r\n\r\ntype HandleProgressChange = (event: ProgressCustomEvent) => void;\r\n\r\nexport default DogProgressBar;\r\n"],"names":["constructor","element","options","this","height","width","horizontal","moveBtnPercentage","moveBtnRadius","step","handleProgressChange","isDragging","moveBtnSelect","isMobile","init","mobile","classList","add","_element","style","getAttribute","borderRadius","clientHeight","addEventListener","event","updateMoveBarWidthAndMoveBtnLeft","clientX","clientY","buildMoveBar","window","updateAddEventListenerStart","test","navigator","userAgent","remove","addKeyboardListeners","removeKeyboardListeners","document","handleKeyboardNavigation","removeEventListener","stepValue","mouseCurrentValue","eleRect","getBoundingClientRect","moveBarRect","moveBar","key","Math","max","left","min","top","showMoveBtn","moveBtn","visibility","opacity","hideMovBtn","bindPositionChange","rectValue","changeEvent","CustomEvent","detail","percentage","toFixed","dispatchEvent","createElement","styleValue","percentageValue","Error","append","buildMoveBtn","positionValue","offsetWidth","addEventListenerStart","onMousedown","onMousemove","onMouseup","onElementMouseover","onElementMouseout","onTouchstart","passive","onTouchmove","onTouchend","touch","touches","setUserSelect","client","eleRectValue","eleRectStyleValue","barValue","btnValue","requestAnimationFrame","btnPosition","barPosition","barPercentage","mousePosition","moveBtnRect","stepSize","round","value","body","userSelect","console","error","Object","assign","dataHorizontal"],"mappings":"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"}
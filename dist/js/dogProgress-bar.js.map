{"version":3,"file":"dogProgress-bar.js","sources":["../../src/js/dogProgress-bar.ts"],"sourcesContent":["/**\n *  ###########################################\n *\n * 注意事项：\n *\n * 如果设置了moveBar width的动画则会影响updateMoveBarWidthAndMoveBtnLeft方法\n *\n * 无法读取this.element.getBoundingClientRect()当前的值\n *\n * 因为此时浏览器还没有绘制完成 可使用setTimeout() 设置大于动画时间的延迟解决\n *\n * ############################################\n */\n\nconst ElementClass: string = 'dog-progress';\nconst MoveBarClass: string = 'move-bar';\nconst MoveBtnClass: string = 'move-btn';\n\nexport interface ProgressBarOptions {\n    height?: string,\n    width?: string,\n    moveBtnPercentage?: number,\n    moveBtnRadius?: string,\n    horizontal?: boolean,\n    step?: number\n    handleProgressChange?: HandleProgressChange,\n\n}\n\n\nclass DogProgressBar {\n    options: ProgressBarOptions = {\n        height: '10px',\n        width: '100%',\n        horizontal: true,\n        //0-1\n        moveBtnPercentage: 0,\n        moveBtnRadius: '15px',\n        //0-100\n        step: 1,\n        /**\n         * 当进度条发生改变时触发事件\n         *\n         * @param event\n         */\n        handleProgressChange: (event: ProgressCustomEvent) => {}\n    }\n    element: Element;\n    moveBar: HTMLElement;\n    moveBtn: HTMLElement;\n    isDragging: boolean = false;\n    horizontal: boolean;\n    moveBtnSelect: boolean = false;\n\n    /**\n     * 创建一个 ProgressBar 实例\n     * @param element\n     * @param options - 进度条的配置选项\n     * @return void\n     * @example\n     *    let progressBars = document.querySelectorAll('.volume-progress');\n     *     progressBars.forEach(item => new progressBar(item))\n     */\n    constructor(element: Element, options?: ProgressBarOptions) {\n        if (!element) {\n            console.error(`Element is \"${element}\"`);\n            return;\n        }\n        this.element = element;\n        this.options = Object.assign({}, this.options, options);\n        this.horizontal = this.options.horizontal;\n        let dataHorizontal: string = element.getAttribute('data-dogProgress-horizontal');\n        if (dataHorizontal) {\n            if (dataHorizontal === 'true') this.horizontal = true;\n            if (dataHorizontal === 'false') this.horizontal = false;\n        }\n        this.init();\n    }\n\n    /**\n     * 初始化Progress\n     */\n    init = () => {\n        this.element.classList.add(ElementClass);\n        if (!this.horizontal) {\n            this.element.classList.add('progress-vertical')\n        }\n\n        let _element: HTMLElement = this.element as HTMLElement;\n        _element.style.height = this.element.getAttribute('data-dogProgress-height') ?? this.options.height;\n        _element.style.width = this.element.getAttribute('data-dogProgress-width') ?? this.options.width;\n        _element.style.borderRadius = (this.element.clientHeight / 2) + 'px';\n        _element.addEventListener('click', (event: MouseEvent) => {\n            this.updateMoveBarWidthAndMoveBtnLeft(this.horizontal ? event.clientX : event.clientY);\n        })\n        this.buildMoveBar();\n        this.element.addEventListener('positionChange', this.options.handleProgressChange)\n        this.element.addEventListener('mouseover', (event: MouseEvent) => {\n            this.addKeyboardListeners();\n            this.showMoveBtn();\n        })\n        this.element.addEventListener('mouseout', (event: MouseEvent) => {\n            this.removeKeyboardListeners();\n            this.hideMovBtn();\n        })\n    }\n\n\n    /**\n     * 监听键盘事件\n     */\n    addKeyboardListeners = () => {\n        this.removeKeyboardListeners()\n        document.addEventListener('keydown', this.handleKeyboardNavigation)\n    }\n\n    /**\n     * 移除键盘事件\n     */\n    removeKeyboardListeners = () => {\n        document.removeEventListener('keydown', this.handleKeyboardNavigation);\n    }\n\n    /**\n     * 键盘事件处理\n     * @param event - KeyboardEvent\n     */\n    handleKeyboardNavigation = (event: KeyboardEvent) => {\n        let eleRect: DOMRect = this.element.getBoundingClientRect(),\n            moveBarRect: DOMRect = this.moveBar.getBoundingClientRect(),\n            stepValue: number, mouseCurrentValue: number;\n        if (this.horizontal) {\n            stepValue = (this.options.step / 100) * eleRect.width;\n            if (event.key === 'ArrowLeft') {\n                mouseCurrentValue = Math.max(0, moveBarRect.width - stepValue) + eleRect.left;\n                // this.moveBar.style.width = `${Math.max(0, (moveBarRect.width - stepValue)).toFixed(1)}px`;\n            }\n            if (event.key === 'ArrowRight') {\n                mouseCurrentValue = Math.min(eleRect.width, (moveBarRect.width + stepValue)) + eleRect.left;\n                // 处理向右键的逻辑\n                // this.moveBar.style.width = `${Math.min(eleRect.width, (moveBarRect.width + stepValue)).toFixed(1)}px`;\n            }\n            this.updateMoveBarWidthAndMoveBtnLeft(mouseCurrentValue)\n        } else {\n            stepValue = (this.options.step / 100) * eleRect.height\n            if (event.key === 'ArrowUp') {\n                mouseCurrentValue = eleRect.top + (eleRect.height - (moveBarRect.height + stepValue));\n            } else if (event.key === 'ArrowDown') {\n                mouseCurrentValue = eleRect.top + (eleRect.height - (moveBarRect.height - stepValue));\n            }\n            this.updateMoveBarWidthAndMoveBtnLeft(mouseCurrentValue)\n        }\n\n\n    }\n\n    /**\n     * 展示moveBtn按钮\n     */\n    showMoveBtn = () => {\n        this.moveBtn.style.visibility = 'unset';\n        this.moveBtn.style.opacity = '1';\n    }\n\n    /**\n     * 隐藏moveBtn按钮\n     */\n    hideMovBtn = () => {\n        if (this.moveBtnSelect) return;\n        this.moveBtn.style.visibility = 'hidden';\n        this.moveBtn.style.opacity = '0';\n    }\n\n\n    /**\n     * 绑定当bar发生变动时触发事件\n     */\n    bindPositionChange = () => {\n        let rectValue: keyof DOMRect = this.horizontal ? 'width' : 'height';\n        let changeEvent: ProgressCustomEvent = new CustomEvent('positionChange', {\n            detail: {\n                percentage: parseFloat((this.moveBar.getBoundingClientRect()[rectValue] /\n                    this.element.getBoundingClientRect()[rectValue]\n                ).toFixed(2)),\n            }\n        });\n        // 触发 change 事件\n        this.element.dispatchEvent(changeEvent);\n    }\n\n    /**\n     * 构建moveBar\n     */\n    buildMoveBar = () => {\n        let moveBar: HTMLElement = document.createElement('div'),\n            styleValue: any = this.horizontal ? 'width' : 'height',\n            percentageValue: number = +this.element.getAttribute('data-dogProgress-value') || this.options.moveBtnPercentage\n        moveBar.classList.add(MoveBarClass);\n        if (typeof percentageValue === 'number') {\n            if (percentageValue < 0 || percentageValue > 1) {\n                throw new Error('moveBtnPercentage的值为0-1之间');\n            }\n            moveBar.style[styleValue] = `${percentageValue * 100}%`;\n        }\n        moveBar.style.borderRadius = (this.element.clientHeight / 2) + 'px';\n        this.element.append(moveBar);\n        this.moveBar = moveBar;\n        this.buildMoveBtn();\n    }\n\n    /**\n     * 构建MoveBtn\n     */\n    buildMoveBtn = () => {\n        let moveBtn: HTMLElement = document.createElement('div'),\n            positionValue: any = this.horizontal ? 'right' : 'top';\n        moveBtn.classList.add(MoveBtnClass);\n        moveBtn.style.height = this.options.moveBtnRadius;\n        moveBtn.style.width = this.options.moveBtnRadius;\n        this.moveBar.append(moveBtn);\n        moveBtn.style[positionValue] = `-${moveBtn.offsetWidth / 2}px`;\n        this.moveBtn = moveBtn;\n        this.moveBtn.addEventListener('mousedown', () => {\n            this.isDragging = true;\n            this.moveBtnSelect = true;\n            document.addEventListener('mousemove', this.onMousemove)\n            document.addEventListener('mouseup', this.onMouseup)\n        })\n    }\n\n    /**\n     * 鼠标按下事件\n     * @param event - mouseEvent\n     */\n    onMouseup = (event: MouseEvent) => {\n        document.removeEventListener('mousemove', this.onMousemove);\n        document.removeEventListener('mouseup', this.onMouseup)\n        this.isDragging = false;\n        this.moveBtnSelect = false;\n        this.hideMovBtn();\n        this.setUserSelect('');\n    }\n\n    /**\n     * 鼠标移动事件\n     * @param event - MouseEvent\n     */\n    onMousemove = (event: MouseEvent) => {\n        if (!this.isDragging || !this.element || !this.moveBar || !this.moveBtn) return;\n        this.setUserSelect('none');\n        this.updateMoveBarWidthAndMoveBtnLeft(this.horizontal ? event.clientX : event.clientY)\n    }\n\n    /**\n     * 更新moveBar和moveBarBtn的位置\n     * @param client - number\n     */\n    updateMoveBarWidthAndMoveBtnLeft = (client: number) => {\n        let eleRectValue: keyof DOMRect, eleRectStyleValue: keyof DOMRect, barValue: any, btnValue: any;\n        if (this.horizontal) {\n            eleRectValue = 'left';\n            eleRectStyleValue = 'width';\n            barValue = 'width';\n            btnValue = 'right';\n        } else {\n            eleRectValue = 'top';\n            eleRectStyleValue = 'height';\n            barValue = 'height';\n            btnValue = 'top';\n        }\n\n\n        requestAnimationFrame(() => {\n            let eleRect: DOMRect = this.element.getBoundingClientRect(),\n                mousePosition: number = client - eleRect[eleRectValue],\n                btnPosition: number, barPosition: number,\n                barPercentage: number, btnPercentage: number;\n            let stepSize: number = eleRect[eleRectStyleValue] * (this.options.step / 100);\n            if (this.horizontal) {\n                barPosition = Math.max(0, Math.min(mousePosition, eleRect[eleRectStyleValue]));\n                barPercentage = Math.min(100, (barPosition / eleRect.width) * 100);\n                btnPosition = 0;\n                if (barPosition < this.moveBtn.getBoundingClientRect().width) {\n                    btnPosition = -(this.moveBtn.getBoundingClientRect().width - (+barPosition.toFixed(0)));\n                }\n            } else {\n                barPosition = Math.round(Math.max(0, Math.min(eleRect[eleRectStyleValue] - mousePosition, eleRect[eleRectStyleValue])) / stepSize) * stepSize;\n                barPercentage = (barPosition / eleRect.height) * 100;\n                btnPosition = 0;\n                if (mousePosition >= eleRect.height - this.moveBtn.getBoundingClientRect().height) {\n                    btnPosition = Math.max(-this.moveBtn.offsetWidth, barPosition - this.moveBtn.offsetWidth);\n                }\n            }\n            this.moveBar.style[barValue] = barPercentage + '%';\n            this.moveBtn.style[btnValue] = btnPosition + 'px';\n            this.bindPositionChange();\n        })\n    }\n\n    /**\n     * 设置用户选中避免拖动突出触发选中\n     * @param value - string\n     */\n    setUserSelect = (value: string) => {\n        document.body.style.userSelect = value;\n    }\n}\n\n\ntype ProgressEvent = {\n    percentage: number\n}\nexport type ProgressCustomEvent = CustomEvent<ProgressEvent>;\n\ntype HandleProgressChange = (event: ProgressCustomEvent) => void;\n\nexport default DogProgressBar;\n"],"names":[],"mappings":"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"}
{"version":3,"file":"dogProgress-bar.cjs.js","sources":["../../src/js/dogProgress-bar.ts"],"sourcesContent":["/**\r\n *  ###########################################\r\n *\r\n * 注意事项：\r\n *\r\n * 如果设置了moveBar width的动画则会影响updateMoveBarWidthAndMoveBtnLeft方法\r\n *\r\n * 无法读取this.element.getBoundingClientRect()当前的值\r\n *\r\n * 因为此时浏览器还没有绘制完成 可使用setTimeout() 设置大于动画时间的延迟解决\r\n *\r\n * ############################################\r\n */\r\nimport '../css/progress-bar.scss';\r\n\r\nconst ElementClass: string = 'dog-progress';\r\nconst MoveBarClass: string = 'move-bar';\r\nconst MoveBtnClass: string = 'move-btn';\r\n\r\nexport interface ProgressBarOptions {\r\n    height?: string,\r\n    width?: string,\r\n    moveBtnPercentage?: number,\r\n    moveBtnRadius?: string,\r\n    horizontal?: boolean,\r\n    step?: number\r\n    handleProgressChange?: HandleProgressChange,\r\n}\r\n\r\n\r\nclass DogProgressBar {\r\n    options: ProgressBarOptions = {\r\n        height: '10px',\r\n        width: '100%',\r\n        horizontal: true,\r\n        //0-1\r\n        moveBtnPercentage: 0,\r\n        moveBtnRadius: '15px',\r\n        //0-100\r\n        step: 1,\r\n        /**\r\n         * 当进度条发生改变时触发事件\r\n         *\r\n         */\r\n        handleProgressChange: () => {return}\r\n    }\r\n    element: Element;\r\n    moveBar: HTMLElement;\r\n    moveBtn: HTMLElement;\r\n    isDragging: boolean = false;\r\n    horizontal: boolean;\r\n    moveBtnSelect: boolean = false;\r\n    isMobile: boolean = false;\r\n\r\n    /**\r\n     * 创建一个 ProgressBar 实例\r\n     * @param element\r\n     * @param options - 进度条的配置选项\r\n     * @return void\r\n     * @example\r\n     *    let progressBars = document.querySelectorAll('.volume-progress');\r\n     *     progressBars.forEach(item => new progressBar(item))\r\n     */\r\n    constructor(element: Element, options?: ProgressBarOptions) {\r\n        if (!element) {\r\n            console.error(`Element is \"${element}\"`);\r\n            return;\r\n        }\r\n        this.element = element;\r\n        this.options = Object.assign({}, this.options, options);\r\n        this.horizontal = this.options.horizontal;\r\n        let dataHorizontal: string = element.getAttribute('data-dogProgress-horizontal');\r\n        if (dataHorizontal) {\r\n            if (dataHorizontal === 'true') this.horizontal = true;\r\n            if (dataHorizontal === 'false') this.horizontal = false;\r\n        }\r\n        this.init();\r\n    }\r\n\r\n    /**\r\n     * 初始化Progress\r\n     */\r\n    init = () => {\r\n        this.mobile();\r\n        this.element.classList.add(ElementClass);\r\n        if (!this.horizontal) {\r\n            this.element.classList.add('progress-vertical')\r\n        }\r\n\r\n        let _element: HTMLElement = this.element as HTMLElement;\r\n        _element.style.height = this.element.getAttribute('data-dogProgress-height') ?? this.options.height;\r\n        _element.style.width = this.element.getAttribute('data-dogProgress-width') ?? this.options.width;\r\n        _element.style.borderRadius = (this.element.clientHeight / 2) + 'px';\r\n        _element.addEventListener('click', (event: MouseEvent) => {\r\n            this.updateMoveBarWidthAndMoveBtnLeft(this.horizontal ? event.clientX : event.clientY);\r\n        })\r\n        this.buildMoveBar();\r\n        this.element.addEventListener('positionChange', this.options.handleProgressChange)\r\n        window.addEventListener('resize', () => {\r\n            this.updateAddEventListenerStart();\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 判断当前客户端是否为mobile并设置相关参数\r\n     */\r\n    mobile = () => {\r\n        if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {\r\n            this.isMobile = true;\r\n            this.element.classList.add('isMobile');\r\n        } else {\r\n            this.isMobile = false;\r\n            this.element.classList.remove('isMobile');\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 监听键盘事件\r\n     */\r\n    addKeyboardListeners = () => {\r\n        this.removeKeyboardListeners()\r\n        document.addEventListener('keydown', this.handleKeyboardNavigation)\r\n    }\r\n\r\n    /**\r\n     * 移除键盘事件\r\n     */\r\n    removeKeyboardListeners = () => {\r\n        document.removeEventListener('keydown', this.handleKeyboardNavigation);\r\n    }\r\n\r\n    /**\r\n     * 键盘事件处理\r\n     * @param event - KeyboardEvent\r\n     */\r\n    handleKeyboardNavigation = (event: KeyboardEvent) => {\r\n        let eleRect: DOMRect = this.element.getBoundingClientRect(),\r\n            moveBarRect: DOMRect = this.moveBar.getBoundingClientRect(),\r\n            stepValue: number, mouseCurrentValue: number;\r\n        if (this.horizontal) {\r\n            stepValue = (this.options.step / 100) * eleRect.width;\r\n            if (event.key === 'ArrowLeft') {\r\n                mouseCurrentValue = Math.max(0, moveBarRect.width - stepValue) + eleRect.left;\r\n                // this.moveBar.style.width = `${Math.max(0, (moveBarRect.width - stepValue)).toFixed(1)}px`;\r\n            }\r\n            if (event.key === 'ArrowRight') {\r\n                mouseCurrentValue = Math.min(eleRect.width, (moveBarRect.width + stepValue)) + eleRect.left;\r\n                // 处理向右键的逻辑\r\n                // this.moveBar.style.width = `${Math.min(eleRect.width, (moveBarRect.width + stepValue)).toFixed(1)}px`;\r\n            }\r\n            this.updateMoveBarWidthAndMoveBtnLeft(mouseCurrentValue)\r\n        } else {\r\n            stepValue = (this.options.step / 100) * eleRect.height\r\n            if (event.key === 'ArrowUp') {\r\n                mouseCurrentValue = eleRect.top + (eleRect.height - (moveBarRect.height + stepValue));\r\n            } else if (event.key === 'ArrowDown') {\r\n                mouseCurrentValue = eleRect.top + (eleRect.height - (moveBarRect.height - stepValue));\r\n            }\r\n            this.updateMoveBarWidthAndMoveBtnLeft(mouseCurrentValue)\r\n        }\r\n\r\n\r\n    }\r\n\r\n    /**\r\n     * 展示moveBtn按钮\r\n     */\r\n    showMoveBtn = () => {\r\n        this.moveBtn.style.visibility = 'unset';\r\n        this.moveBtn.style.opacity = '1';\r\n    }\r\n\r\n    /**\r\n     * 隐藏moveBtn按钮\r\n     */\r\n    hideMovBtn = () => {\r\n        if (this.moveBtnSelect) return;\r\n        this.moveBtn.style.visibility = 'hidden';\r\n        this.moveBtn.style.opacity = '0';\r\n    }\r\n\r\n\r\n    /**\r\n     * 绑定当bar发生变动时触发事件\r\n     */\r\n    bindPositionChange = () => {\r\n        let rectValue: keyof DOMRect = this.horizontal ? 'width' : 'height';\r\n        let changeEvent: ProgressCustomEvent = new CustomEvent('positionChange', {\r\n            detail: {\r\n                percentage: +(this.moveBar.getBoundingClientRect()[rectValue] /\r\n                    this.element.getBoundingClientRect()[rectValue]\r\n                ).toFixed(2),\r\n            }\r\n        });\r\n        // 触发 change 事件\r\n        this.element.dispatchEvent(changeEvent);\r\n    }\r\n\r\n    /**\r\n     * 构建moveBar\r\n     */\r\n    buildMoveBar = () => {\r\n        let moveBar: HTMLElement = document.createElement('div'),\r\n            styleValue: any = this.horizontal ? 'width' : 'height',\r\n            percentageValue: number = +this.element.getAttribute('data-dogProgress-value') || this.options.moveBtnPercentage\r\n        moveBar.classList.add(MoveBarClass);\r\n        if (typeof percentageValue === 'number') {\r\n            if (percentageValue < 0 || percentageValue > 1) {\r\n                throw new Error('moveBtnPercentage的值为0-1之间');\r\n            }\r\n            moveBar.style[styleValue] = `${percentageValue * 100}%`;\r\n        }\r\n        moveBar.style.borderRadius = (this.element.clientHeight / 2) + 'px';\r\n        this.element.append(moveBar);\r\n        this.moveBar = moveBar;\r\n        this.buildMoveBtn();\r\n    }\r\n\r\n    /**\r\n     * 构建MoveBtn\r\n     */\r\n    buildMoveBtn = () => {\r\n        let moveBtn: HTMLElement = document.createElement('div'),\r\n            positionValue: any = this.horizontal ? 'right' : 'top';\r\n        moveBtn.classList.add(MoveBtnClass);\r\n        moveBtn.style.height = this.options.moveBtnRadius;\r\n        moveBtn.style.width = this.options.moveBtnRadius;\r\n        this.moveBar.append(moveBtn);\r\n        moveBtn.style[positionValue] = `-${moveBtn.offsetWidth / 2}px`;\r\n        this.moveBtn = moveBtn;\r\n        this.addEventListenerStart();\r\n    }\r\n\r\n    /**\r\n     * 更新事件监听\r\n     */\r\n    updateAddEventListenerStart = () => {\r\n        this.mobile();\r\n        this.addEventListenerStart();\r\n    }\r\n\r\n    /**\r\n     * 更具当前客户端来移除和监听事件\r\n     *\r\n     */\r\n    addEventListenerStart = () => {\r\n        if (this.isMobile) {\r\n            document.removeEventListener('mousedown', this.onMousedown)\r\n            document.removeEventListener('mousemove', this.onMousemove);\r\n            document.removeEventListener('mouseup', this.onMouseup);\r\n            this.element.removeEventListener('mouseover', this.onElementMouseover);\r\n            this.element.removeEventListener('mouseout', this.onElementMouseout);\r\n            this.moveBtn.addEventListener('touchstart', this.onTouchstart, {passive: true})\r\n        } else {\r\n            document.removeEventListener('touchstart', this.onTouchstart);\r\n            document.removeEventListener('touchmove', this.onTouchmove);\r\n            document.removeEventListener('touchend', this.onTouchend);\r\n            this.element.addEventListener('mouseover', this.onElementMouseover);\r\n            this.element.addEventListener('mouseout', this.onElementMouseout);\r\n            this.moveBtn.addEventListener('mousedown', this.onMousedown);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 鼠标移入progress-bar事件\r\n     */\r\n    onElementMouseover = () => {\r\n        this.addKeyboardListeners();\r\n        this.showMoveBtn();\r\n    }\r\n\r\n    /**\r\n     * 鼠标移出progress-bar事件\r\n     */\r\n    onElementMouseout = () => {\r\n        this.removeKeyboardListeners();\r\n        this.hideMovBtn();\r\n    }\r\n\r\n    /**\r\n     * 触摸开始事件\r\n     */\r\n    onTouchstart = () => {\r\n        this.isDragging = true;\r\n        this.moveBtnSelect = true;\r\n        document.addEventListener('touchmove', this.onTouchmove, {passive: true});\r\n        document.addEventListener('touchend', this.onTouchend);\r\n    }\r\n\r\n    /**\r\n     * 触摸移动事件\r\n     * @param event\r\n     */\r\n    onTouchmove = (event: TouchEvent) => {\r\n        if (!this.isDragging || !this.element || !this.moveBar || !this.moveBtn) return;\r\n        let touch: Touch = event.touches[0];\r\n        this.setUserSelect('none');\r\n        this.updateMoveBarWidthAndMoveBtnLeft(this.horizontal ? touch.clientX : touch.clientY)\r\n    }\r\n\r\n    /**\r\n     * 触摸结束事件\r\n     */\r\n\r\n    onTouchend = () => {\r\n        document.removeEventListener('touchmove', this.onTouchmove);\r\n        document.removeEventListener('touchend', this.onTouchend);\r\n        this.isDragging = false;\r\n        this.moveBtnSelect = false;\r\n        this.setUserSelect('');\r\n    }\r\n\r\n    /**\r\n     * 鼠标按下事件\r\n     */\r\n    onMousedown = () => {\r\n        this.isDragging = true;\r\n        this.moveBtnSelect = true;\r\n        document.addEventListener('mousemove', this.onMousemove)\r\n        document.addEventListener('mouseup', this.onMouseup)\r\n    }\r\n\r\n    /**\r\n     * 鼠标抬起事件\r\n     */\r\n    onMouseup = () => {\r\n        document.removeEventListener('mousemove', this.onMousemove);\r\n        document.removeEventListener('mouseup', this.onMouseup)\r\n        this.isDragging = false;\r\n        this.moveBtnSelect = false;\r\n        this.hideMovBtn();\r\n        this.setUserSelect('');\r\n    }\r\n\r\n    /**\r\n     * 鼠标移动事件\r\n     * @param event - MouseEvent\r\n     */\r\n    onMousemove = (event: MouseEvent) => {\r\n        if (!this.isDragging || !this.element || !this.moveBar || !this.moveBtn) return;\r\n        this.setUserSelect('none');\r\n        this.updateMoveBarWidthAndMoveBtnLeft(this.horizontal ? event.clientX : event.clientY)\r\n    }\r\n\r\n    /**\r\n     * 更新moveBar和moveBarBtn的位置\r\n     * @param client - number\r\n     */\r\n    updateMoveBarWidthAndMoveBtnLeft = (client: number) => {\r\n        let eleRectValue: keyof DOMRect, eleRectStyleValue: keyof DOMRect, barValue: any, btnValue: any;\r\n        if (this.horizontal) {\r\n            eleRectValue = 'left';\r\n            eleRectStyleValue = 'width';\r\n            barValue = 'width';\r\n            btnValue = 'right';\r\n        } else {\r\n            eleRectValue = 'top';\r\n            eleRectStyleValue = 'height';\r\n            barValue = 'height';\r\n            btnValue = 'top';\r\n        }\r\n\r\n\r\n        requestAnimationFrame(() => {\r\n            let eleRect: DOMRect = this.element.getBoundingClientRect(),\r\n                mousePosition: number = client - eleRect[eleRectValue],\r\n                btnPosition: number, barPosition: number,\r\n                barPercentage: number,\r\n                moveBtnRect: DOMRect = this.moveBtn.getBoundingClientRect();\r\n            let stepSize: number = eleRect[eleRectStyleValue] * (this.options.step / 100);\r\n            if (this.horizontal) {\r\n                barPosition = Math.max(0, Math.min(mousePosition, eleRect[eleRectStyleValue]));\r\n                barPercentage = Math.min(100, (barPosition / eleRect.width) * 100);\r\n                btnPosition = 0;\r\n                if (barPosition < moveBtnRect.width) {\r\n                    btnPosition = -(moveBtnRect.width - (+barPosition.toFixed(0)));\r\n                }\r\n            } else {\r\n                barPosition = Math.round(Math.max(0, Math.min(eleRect[eleRectStyleValue] - mousePosition, eleRect[eleRectStyleValue])) / stepSize) * stepSize;\r\n                barPercentage = (barPosition / eleRect.height) * 100;\r\n                btnPosition = 0;\r\n                if (mousePosition >= eleRect.height - moveBtnRect.height) {\r\n                    btnPosition = Math.max(-this.moveBtn.offsetWidth, barPosition - this.moveBtn.offsetWidth);\r\n                }\r\n            }\r\n            this.moveBar.style[barValue] = barPercentage + '%';\r\n            this.moveBtn.style[btnValue] = btnPosition + 'px';\r\n            this.bindPositionChange();\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 设置用户选中避免拖动突出触发选中\r\n     * @param value - string\r\n     */\r\n    setUserSelect = (value: string) => {\r\n        document.body.style.userSelect = value;\r\n    }\r\n}\r\n\r\n\r\ntype ProgressEvent = {\r\n    percentage: number\r\n}\r\nexport type ProgressCustomEvent = CustomEvent<ProgressEvent>;\r\n\r\ntype HandleProgressChange = (event: ProgressCustomEvent) => void;\r\n\r\nexport default DogProgressBar;\r\n"],"names":[],"mappings":"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"}
{"version":3,"file":"dogProgress-bar.esm.js","sources":["../../src/js/dogProgress-bar.ts"],"sourcesContent":["/**\n *  ###########################################\n *\n * 注意事项：\n *\n * 如果设置了moveBar width的动画则会影响updateMoveBarWidthAndMoveBtnLeft方法\n *\n * 无法读取this.element.getBoundingClientRect()当前的值\n *\n * 因为此时浏览器还没有绘制完成 可使用setTimeout() 设置大于动画时间的延迟解决\n *\n * ############################################\n */\n\nconst ElementClass: string = 'dog-progress';\nconst MoveBarClass: string = 'move-bar';\nconst MoveBtnClass: string = 'move-btn';\n\nexport interface ProgressBarOptions {\n    height?: string,\n    width?: string,\n    moveBtnPercentage?: number,\n    moveBtnRadius?: string,\n    horizontal?: boolean,\n    step?: number\n    handleProgressChange?: HandleProgressChange,\n\n}\n\n\nclass DogProgressBar {\n    options: ProgressBarOptions = {\n        height: '10px',\n        width: '100%',\n        horizontal: true,\n        //0-1\n        moveBtnPercentage: 0,\n        moveBtnRadius: '15px',\n        //0-100\n        step: 1,\n        /**\n         * 当进度条发生改变时触发事件\n         *\n         * @param event\n         */\n        handleProgressChange: (event: ProgressCustomEvent) => {}\n    }\n    element: Element;\n    moveBar: HTMLElement;\n    moveBtn: HTMLElement;\n    isDragging: boolean = false;\n    horizontal: boolean;\n    moveBtnSelect: boolean = false;\n\n    /**\n     * 创建一个 ProgressBar 实例\n     * @param element\n     * @param options - 进度条的配置选项\n     * @return void\n     * @example\n     *    let progressBars = document.querySelectorAll('.volume-progress');\n     *     progressBars.forEach(item => new progressBar(item))\n     */\n    constructor(element: Element, options?: ProgressBarOptions) {\n        if (!element) {\n            console.error(`Element is \"${element}\"`);\n            return;\n        }\n        this.element = element;\n        this.options = Object.assign({}, this.options, options);\n        this.horizontal = this.options.horizontal;\n        let dataHorizontal: string = element.getAttribute('data-dogProgress-horizontal');\n        if (dataHorizontal) {\n            if (dataHorizontal === 'true') this.horizontal = true;\n            if (dataHorizontal === 'false') this.horizontal = false;\n        }\n        this.init();\n    }\n\n    /**\n     * 初始化Progress\n     */\n    init = () => {\n        this.element.classList.add(ElementClass);\n        if (!this.horizontal) {\n            this.element.classList.add('progress-vertical')\n        }\n\n        let _element: HTMLElement = this.element as HTMLElement;\n        _element.style.height = this.element.getAttribute('data-dogProgress-height') ?? this.options.height;\n        _element.style.width = this.element.getAttribute('data-dogProgress-width') ?? this.options.width;\n        _element.style.borderRadius = (this.element.clientHeight / 2) + 'px';\n        _element.addEventListener('click', (event: MouseEvent) => {\n            this.updateMoveBarWidthAndMoveBtnLeft(this.horizontal ? event.clientX : event.clientY);\n        })\n        this.buildMoveBar();\n        this.element.addEventListener('positionChange', this.options.handleProgressChange)\n        this.element.addEventListener('mouseover', (event: MouseEvent) => {\n            this.addKeyboardListeners();\n            this.showMoveBtn();\n        })\n        this.element.addEventListener('mouseout', (event: MouseEvent) => {\n            this.removeKeyboardListeners();\n            this.hideMovBtn();\n        })\n    }\n\n\n    /**\n     * 监听键盘事件\n     */\n    addKeyboardListeners = () => {\n        this.removeKeyboardListeners()\n        document.addEventListener('keydown', this.handleKeyboardNavigation)\n    }\n\n    /**\n     * 移除键盘事件\n     */\n    removeKeyboardListeners = () => {\n        document.removeEventListener('keydown', this.handleKeyboardNavigation);\n    }\n\n    /**\n     * 键盘事件处理\n     * @param event - KeyboardEvent\n     */\n    handleKeyboardNavigation = (event: KeyboardEvent) => {\n        let eleRect: DOMRect = this.element.getBoundingClientRect(),\n            moveBarRect: DOMRect = this.moveBar.getBoundingClientRect(),\n            stepValue: number, mouseCurrentValue: number;\n        if (this.horizontal) {\n            stepValue = (this.options.step / 100) * eleRect.width;\n            if (event.key === 'ArrowLeft') {\n                mouseCurrentValue = Math.max(0, moveBarRect.width - stepValue) + eleRect.left;\n                // this.moveBar.style.width = `${Math.max(0, (moveBarRect.width - stepValue)).toFixed(1)}px`;\n            }\n            if (event.key === 'ArrowRight') {\n                mouseCurrentValue = Math.min(eleRect.width, (moveBarRect.width + stepValue)) + eleRect.left;\n                // 处理向右键的逻辑\n                // this.moveBar.style.width = `${Math.min(eleRect.width, (moveBarRect.width + stepValue)).toFixed(1)}px`;\n            }\n            this.updateMoveBarWidthAndMoveBtnLeft(mouseCurrentValue)\n        } else {\n            stepValue = (this.options.step / 100) * eleRect.height\n            if (event.key === 'ArrowUp') {\n                mouseCurrentValue = eleRect.top + (eleRect.height - (moveBarRect.height + stepValue));\n            } else if (event.key === 'ArrowDown') {\n                mouseCurrentValue = eleRect.top + (eleRect.height - (moveBarRect.height - stepValue));\n            }\n            this.updateMoveBarWidthAndMoveBtnLeft(mouseCurrentValue)\n        }\n\n\n    }\n\n    /**\n     * 展示moveBtn按钮\n     */\n    showMoveBtn = () => {\n        this.moveBtn.style.visibility = 'unset';\n        this.moveBtn.style.opacity = '1';\n    }\n\n    /**\n     * 隐藏moveBtn按钮\n     */\n    hideMovBtn = () => {\n        if (this.moveBtnSelect) return;\n        this.moveBtn.style.visibility = 'hidden';\n        this.moveBtn.style.opacity = '0';\n    }\n\n\n    /**\n     * 绑定当bar发生变动时触发事件\n     */\n    bindPositionChange = () => {\n        let rectValue: keyof DOMRect = this.horizontal ? 'width' : 'height';\n        let changeEvent: ProgressCustomEvent = new CustomEvent('positionChange', {\n            detail: {\n                percentage: parseFloat((this.moveBar.getBoundingClientRect()[rectValue] /\n                    this.element.getBoundingClientRect()[rectValue]\n                ).toFixed(2)),\n            }\n        });\n        // 触发 change 事件\n        this.element.dispatchEvent(changeEvent);\n    }\n\n    /**\n     * 构建moveBar\n     */\n    buildMoveBar = () => {\n        let moveBar: HTMLElement = document.createElement('div'),\n            styleValue: any = this.horizontal ? 'width' : 'height',\n            percentageValue: number = +this.element.getAttribute('data-dogProgress-value') || this.options.moveBtnPercentage\n        moveBar.classList.add(MoveBarClass);\n        if (typeof percentageValue === 'number') {\n            if (percentageValue < 0 || percentageValue > 1) {\n                throw new Error('moveBtnPercentage的值为0-1之间');\n            }\n            moveBar.style[styleValue] = `${percentageValue * 100}%`;\n        }\n        moveBar.style.borderRadius = (this.element.clientHeight / 2) + 'px';\n        this.element.append(moveBar);\n        this.moveBar = moveBar;\n        this.buildMoveBtn();\n    }\n\n    /**\n     * 构建MoveBtn\n     */\n    buildMoveBtn = () => {\n        let moveBtn: HTMLElement = document.createElement('div'),\n            positionValue: any = this.horizontal ? 'right' : 'top';\n        moveBtn.classList.add(MoveBtnClass);\n        moveBtn.style.height = this.options.moveBtnRadius;\n        moveBtn.style.width = this.options.moveBtnRadius;\n        this.moveBar.append(moveBtn);\n        moveBtn.style[positionValue] = `-${moveBtn.offsetWidth / 2}px`;\n        this.moveBtn = moveBtn;\n        this.moveBtn.addEventListener('mousedown', () => {\n            this.isDragging = true;\n            this.moveBtnSelect = true;\n            document.addEventListener('mousemove', this.onMousemove)\n            document.addEventListener('mouseup', this.onMouseup)\n        })\n    }\n\n    /**\n     * 鼠标按下事件\n     * @param event - mouseEvent\n     */\n    onMouseup = (event: MouseEvent) => {\n        document.removeEventListener('mousemove', this.onMousemove);\n        document.removeEventListener('mouseup', this.onMouseup)\n        this.isDragging = false;\n        this.moveBtnSelect = false;\n        this.hideMovBtn();\n        this.setUserSelect('');\n    }\n\n    /**\n     * 鼠标移动事件\n     * @param event - MouseEvent\n     */\n    onMousemove = (event: MouseEvent) => {\n        if (!this.isDragging || !this.element || !this.moveBar || !this.moveBtn) return;\n        this.setUserSelect('none');\n        this.updateMoveBarWidthAndMoveBtnLeft(this.horizontal ? event.clientX : event.clientY)\n    }\n\n    /**\n     * 更新moveBar和moveBarBtn的位置\n     * @param client - number\n     */\n    updateMoveBarWidthAndMoveBtnLeft = (client: number) => {\n        let eleRectValue: keyof DOMRect, eleRectStyleValue: keyof DOMRect, barValue: any, btnValue: any;\n        if (this.horizontal) {\n            eleRectValue = 'left';\n            eleRectStyleValue = 'width';\n            barValue = 'width';\n            btnValue = 'right';\n        } else {\n            eleRectValue = 'top';\n            eleRectStyleValue = 'height';\n            barValue = 'height';\n            btnValue = 'top';\n        }\n\n\n        requestAnimationFrame(() => {\n            let eleRect: DOMRect = this.element.getBoundingClientRect(),\n                mousePosition: number = client - eleRect[eleRectValue],\n                btnPosition: number, barPosition: number,\n                barPercentage: number, btnPercentage: number;\n            let stepSize: number = eleRect[eleRectStyleValue] * (this.options.step / 100);\n            if (this.horizontal) {\n                barPosition = Math.max(0, Math.min(mousePosition, eleRect[eleRectStyleValue]));\n                barPercentage = Math.min(100, (barPosition / eleRect.width) * 100);\n                btnPosition = 0;\n                if (barPosition < this.moveBtn.getBoundingClientRect().width) {\n                    btnPosition = -(this.moveBtn.getBoundingClientRect().width - (+barPosition.toFixed(0)));\n                }\n            } else {\n                barPosition = Math.round(Math.max(0, Math.min(eleRect[eleRectStyleValue] - mousePosition, eleRect[eleRectStyleValue])) / stepSize) * stepSize;\n                barPercentage = (barPosition / eleRect.height) * 100;\n                btnPosition = 0;\n                if (mousePosition >= eleRect.height - this.moveBtn.getBoundingClientRect().height) {\n                    btnPosition = Math.max(-this.moveBtn.offsetWidth, barPosition - this.moveBtn.offsetWidth);\n                }\n            }\n            this.moveBar.style[barValue] = barPercentage + '%';\n            this.moveBtn.style[btnValue] = btnPosition + 'px';\n            this.bindPositionChange();\n        })\n    }\n\n    /**\n     * 设置用户选中避免拖动突出触发选中\n     * @param value - string\n     */\n    setUserSelect = (value: string) => {\n        document.body.style.userSelect = value;\n    }\n}\n\n\ntype ProgressEvent = {\n    percentage: number\n}\nexport type ProgressCustomEvent = CustomEvent<ProgressEvent>;\n\ntype HandleProgressChange = (event: ProgressCustomEvent) => void;\n\nexport default DogProgressBar;\n"],"names":[],"mappings":"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"}
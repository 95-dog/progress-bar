{"version":3,"file":"dogProgress-bar.umd.js","sources":["../../src/js/dogProgress-bar.ts"],"sourcesContent":["/**\r\n *  ###########################################\r\n *\r\n * 注意事项：\r\n *\r\n * 如果设置了moveBar width的动画则会影响updateMoveBarWidthAndMoveBtnLeft方法\r\n *\r\n * 无法读取this.element.getBoundingClientRect()当前的值\r\n *\r\n * 因为此时浏览器还没有绘制完成 可使用setTimeout() 设置大于动画时间的延迟解决\r\n *\r\n * ############################################\r\n */\r\nimport '../css/progress-bar.scss';\r\n\r\nconst ElementClass: string = 'dog-progress';\r\nconst MoveBarClass: string = 'move-bar';\r\nconst MoveBtnClass: string = 'move-btn';\r\n\r\nexport interface ProgressBarOptions {\r\n    height?: string,\r\n    width?: string,\r\n    moveBtnPercentage?: number,\r\n    moveBtnRadius?: string,\r\n    horizontal?: boolean,\r\n    step?: number\r\n    handleProgressChange?: HandleProgressChange,\r\n}\r\n\r\n\r\nclass DogProgressBar {\r\n    options: ProgressBarOptions = {\r\n        height: '10px',\r\n        width: '100%',\r\n        horizontal: true,\r\n        //0-1\r\n        moveBtnPercentage: 0,\r\n        moveBtnRadius: '15px',\r\n        //0-100\r\n        step: 1,\r\n        /**\r\n         * 当进度条发生改变时触发事件\r\n         *\r\n         * @param event\r\n         */\r\n        handleProgressChange: (event: ProgressCustomEvent) => {}\r\n    }\r\n    element: Element;\r\n    moveBar: HTMLElement;\r\n    moveBtn: HTMLElement;\r\n    isDragging: boolean = false;\r\n    horizontal: boolean;\r\n    moveBtnSelect: boolean = false;\r\n\r\n    /**\r\n     * 创建一个 ProgressBar 实例\r\n     * @param element\r\n     * @param options - 进度条的配置选项\r\n     * @return void\r\n     * @example\r\n     *    let progressBars = document.querySelectorAll('.volume-progress');\r\n     *     progressBars.forEach(item => new progressBar(item))\r\n     */\r\n    constructor(element: Element, options?: ProgressBarOptions) {\r\n        if (!element) {\r\n            console.error(`Element is \"${element}\"`);\r\n            return;\r\n        }\r\n        this.element = element;\r\n        this.options = Object.assign({}, this.options, options);\r\n        this.horizontal = this.options.horizontal;\r\n        let dataHorizontal: string = element.getAttribute('data-dogProgress-horizontal');\r\n        if (dataHorizontal) {\r\n            if (dataHorizontal === 'true') this.horizontal = true;\r\n            if (dataHorizontal === 'false') this.horizontal = false;\r\n        }\r\n        this.init();\r\n    }\r\n\r\n    /**\r\n     * 初始化Progress\r\n     */\r\n    init = () => {\r\n        this.element.classList.add(ElementClass);\r\n        if (!this.horizontal) {\r\n            this.element.classList.add('progress-vertical')\r\n        }\r\n\r\n        let _element: HTMLElement = this.element as HTMLElement;\r\n        _element.style.height = this.element.getAttribute('data-dogProgress-height') ?? this.options.height;\r\n        _element.style.width = this.element.getAttribute('data-dogProgress-width') ?? this.options.width;\r\n        _element.style.borderRadius = (this.element.clientHeight / 2) + 'px';\r\n        _element.addEventListener('click', (event: MouseEvent) => {\r\n            this.updateMoveBarWidthAndMoveBtnLeft(this.horizontal ? event.clientX : event.clientY);\r\n        })\r\n        this.buildMoveBar();\r\n        this.element.addEventListener('positionChange', this.options.handleProgressChange)\r\n        this.element.addEventListener('mouseover', (event: MouseEvent) => {\r\n            this.addKeyboardListeners();\r\n            this.showMoveBtn();\r\n        })\r\n        this.element.addEventListener('mouseout', (event: MouseEvent) => {\r\n            this.removeKeyboardListeners();\r\n            this.hideMovBtn();\r\n        })\r\n    }\r\n\r\n\r\n    /**\r\n     * 监听键盘事件\r\n     */\r\n    addKeyboardListeners = () => {\r\n        this.removeKeyboardListeners()\r\n        document.addEventListener('keydown', this.handleKeyboardNavigation)\r\n    }\r\n\r\n    /**\r\n     * 移除键盘事件\r\n     */\r\n    removeKeyboardListeners = () => {\r\n        document.removeEventListener('keydown', this.handleKeyboardNavigation);\r\n    }\r\n\r\n    /**\r\n     * 键盘事件处理\r\n     * @param event - KeyboardEvent\r\n     */\r\n    handleKeyboardNavigation = (event: KeyboardEvent) => {\r\n        let eleRect: DOMRect = this.element.getBoundingClientRect(),\r\n            moveBarRect: DOMRect = this.moveBar.getBoundingClientRect(),\r\n            stepValue: number, mouseCurrentValue: number;\r\n        if (this.horizontal) {\r\n            stepValue = (this.options.step / 100) * eleRect.width;\r\n            if (event.key === 'ArrowLeft') {\r\n                mouseCurrentValue = Math.max(0, moveBarRect.width - stepValue) + eleRect.left;\r\n                // this.moveBar.style.width = `${Math.max(0, (moveBarRect.width - stepValue)).toFixed(1)}px`;\r\n            }\r\n            if (event.key === 'ArrowRight') {\r\n                mouseCurrentValue = Math.min(eleRect.width, (moveBarRect.width + stepValue)) + eleRect.left;\r\n                // 处理向右键的逻辑\r\n                // this.moveBar.style.width = `${Math.min(eleRect.width, (moveBarRect.width + stepValue)).toFixed(1)}px`;\r\n            }\r\n            this.updateMoveBarWidthAndMoveBtnLeft(mouseCurrentValue)\r\n        } else {\r\n            stepValue = (this.options.step / 100) * eleRect.height\r\n            if (event.key === 'ArrowUp') {\r\n                mouseCurrentValue = eleRect.top + (eleRect.height - (moveBarRect.height + stepValue));\r\n            } else if (event.key === 'ArrowDown') {\r\n                mouseCurrentValue = eleRect.top + (eleRect.height - (moveBarRect.height - stepValue));\r\n            }\r\n            this.updateMoveBarWidthAndMoveBtnLeft(mouseCurrentValue)\r\n        }\r\n\r\n\r\n    }\r\n\r\n    /**\r\n     * 展示moveBtn按钮\r\n     */\r\n    showMoveBtn = () => {\r\n        this.moveBtn.style.visibility = 'unset';\r\n        this.moveBtn.style.opacity = '1';\r\n    }\r\n\r\n    /**\r\n     * 隐藏moveBtn按钮\r\n     */\r\n    hideMovBtn = () => {\r\n        if (this.moveBtnSelect) return;\r\n        this.moveBtn.style.visibility = 'hidden';\r\n        this.moveBtn.style.opacity = '0';\r\n    }\r\n\r\n\r\n    /**\r\n     * 绑定当bar发生变动时触发事件\r\n     */\r\n    bindPositionChange = () => {\r\n        let rectValue: keyof DOMRect = this.horizontal ? 'width' : 'height';\r\n        let changeEvent: ProgressCustomEvent = new CustomEvent('positionChange', {\r\n            detail: {\r\n                percentage: +(this.moveBar.getBoundingClientRect()[rectValue] /\r\n                    this.element.getBoundingClientRect()[rectValue]\r\n                ).toFixed(2),\r\n            }\r\n        });\r\n        // 触发 change 事件\r\n        this.element.dispatchEvent(changeEvent);\r\n    }\r\n\r\n    /**\r\n     * 构建moveBar\r\n     */\r\n    buildMoveBar = () => {\r\n        let moveBar: HTMLElement = document.createElement('div'),\r\n            styleValue: any = this.horizontal ? 'width' : 'height',\r\n            percentageValue: number = +this.element.getAttribute('data-dogProgress-value') || this.options.moveBtnPercentage\r\n        moveBar.classList.add(MoveBarClass);\r\n        if (typeof percentageValue === 'number') {\r\n            if (percentageValue < 0 || percentageValue > 1) {\r\n                throw new Error('moveBtnPercentage的值为0-1之间');\r\n            }\r\n            moveBar.style[styleValue] = `${percentageValue * 100}%`;\r\n        }\r\n        moveBar.style.borderRadius = (this.element.clientHeight / 2) + 'px';\r\n        this.element.append(moveBar);\r\n        this.moveBar = moveBar;\r\n        this.buildMoveBtn();\r\n    }\r\n\r\n    /**\r\n     * 构建MoveBtn\r\n     */\r\n    buildMoveBtn = () => {\r\n        let moveBtn: HTMLElement = document.createElement('div'),\r\n            positionValue: any = this.horizontal ? 'right' : 'top';\r\n        moveBtn.classList.add(MoveBtnClass);\r\n        moveBtn.style.height = this.options.moveBtnRadius;\r\n        moveBtn.style.width = this.options.moveBtnRadius;\r\n        this.moveBar.append(moveBtn);\r\n        moveBtn.style[positionValue] = `-${moveBtn.offsetWidth / 2}px`;\r\n        this.moveBtn = moveBtn;\r\n        this.moveBtn.addEventListener('mousedown', () => {\r\n            this.isDragging = true;\r\n            this.moveBtnSelect = true;\r\n            document.addEventListener('mousemove', this.onMousemove)\r\n            document.addEventListener('mouseup', this.onMouseup)\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 鼠标按下事件\r\n     * @param event - mouseEvent\r\n     */\r\n    onMouseup = (event: MouseEvent) => {\r\n        document.removeEventListener('mousemove', this.onMousemove);\r\n        document.removeEventListener('mouseup', this.onMouseup)\r\n        this.isDragging = false;\r\n        this.moveBtnSelect = false;\r\n        this.hideMovBtn();\r\n        this.setUserSelect('');\r\n    }\r\n\r\n    /**\r\n     * 鼠标移动事件\r\n     * @param event - MouseEvent\r\n     */\r\n    onMousemove = (event: MouseEvent) => {\r\n        if (!this.isDragging || !this.element || !this.moveBar || !this.moveBtn) return;\r\n        this.setUserSelect('none');\r\n        this.updateMoveBarWidthAndMoveBtnLeft(this.horizontal ? event.clientX : event.clientY)\r\n    }\r\n\r\n    /**\r\n     * 更新moveBar和moveBarBtn的位置\r\n     * @param client - number\r\n     */\r\n    updateMoveBarWidthAndMoveBtnLeft = (client: number) => {\r\n        let eleRectValue: keyof DOMRect, eleRectStyleValue: keyof DOMRect, barValue: any, btnValue: any;\r\n        if (this.horizontal) {\r\n            eleRectValue = 'left';\r\n            eleRectStyleValue = 'width';\r\n            barValue = 'width';\r\n            btnValue = 'right';\r\n        } else {\r\n            eleRectValue = 'top';\r\n            eleRectStyleValue = 'height';\r\n            barValue = 'height';\r\n            btnValue = 'top';\r\n        }\r\n\r\n\r\n        requestAnimationFrame(() => {\r\n            let eleRect: DOMRect = this.element.getBoundingClientRect(),\r\n                mousePosition: number = client - eleRect[eleRectValue],\r\n                btnPosition: number, barPosition: number,\r\n                barPercentage: number, btnPercentage: number;\r\n            let stepSize: number = eleRect[eleRectStyleValue] * (this.options.step / 100);\r\n            if (this.horizontal) {\r\n                barPosition = Math.max(0, Math.min(mousePosition, eleRect[eleRectStyleValue]));\r\n                barPercentage = Math.min(100, (barPosition / eleRect.width) * 100);\r\n                btnPosition = 0;\r\n                if (barPosition < this.moveBtn.getBoundingClientRect().width) {\r\n                    btnPosition = -(this.moveBtn.getBoundingClientRect().width - (+barPosition.toFixed(0)));\r\n                }\r\n            } else {\r\n                barPosition = Math.round(Math.max(0, Math.min(eleRect[eleRectStyleValue] - mousePosition, eleRect[eleRectStyleValue])) / stepSize) * stepSize;\r\n                barPercentage = (barPosition / eleRect.height) * 100;\r\n                btnPosition = 0;\r\n                if (mousePosition >= eleRect.height - this.moveBtn.getBoundingClientRect().height) {\r\n                    btnPosition = Math.max(-this.moveBtn.offsetWidth, barPosition - this.moveBtn.offsetWidth);\r\n                }\r\n            }\r\n            this.moveBar.style[barValue] = barPercentage + '%';\r\n            this.moveBtn.style[btnValue] = btnPosition + 'px';\r\n            this.bindPositionChange();\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 设置用户选中避免拖动突出触发选中\r\n     * @param value - string\r\n     */\r\n    setUserSelect = (value: string) => {\r\n        document.body.style.userSelect = value;\r\n    }\r\n}\r\n\r\n\r\ntype ProgressEvent = {\r\n    percentage: number\r\n}\r\nexport type ProgressCustomEvent = CustomEvent<ProgressEvent>;\r\n\r\ntype HandleProgressChange = (event: ProgressCustomEvent) => void;\r\n\r\nexport default DogProgressBar;\r\n"],"names":[],"mappings":"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"}